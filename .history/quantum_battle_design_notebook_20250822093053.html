<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Battle System Designer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .module-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .module-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .module-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .module-icon {
            font-size: 1.5em;
        }

        /* åˆæœŸé…ç½®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« */
        .placement-board {
            display: grid;
            grid-template-columns: repeat(6, 50px);
            grid-template-rows: repeat(6, 50px);
            gap: 2px;
            margin: 20px auto;
            background: #444;
            padding: 10px;
            border-radius: 10px;
            width: fit-content;
        }

        .board-cell {
            background: #f0f0f0;
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 20px;
            position: relative;
        }

        .board-cell:hover {
            background: #e0e0e0;
            transform: scale(1.1);
            z-index: 10;
        }

        .board-cell.player-a {
            background: #4CAF50;
            color: white;
        }

        .board-cell.player-b {
            background: #2196F3;
            color: white;
        }

        .board-cell.good {
            font-weight: bold;
        }

        .board-cell.bad::after {
            content: 'â“';
            position: absolute;
            top: -5px;
            right: -5px;
            font-size: 12px;
        }

        /* æ•µé§’æ¨å®šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« */
        .quantum-config {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .config-item {
            margin: 15px 0;
        }

        .config-label {
            font-weight: bold;
            color: #555;
            display: block;
            margin-bottom: 5px;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        input[type="range"] {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: linear-gradient(to right, #667eea, #764ba2);
            outline: none;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            cursor: pointer;
        }

        .value-display {
            background: white;
            padding: 5px 10px;
            border-radius: 5px;
            min-width: 50px;
            text-align: center;
            font-weight: bold;
            color: #667eea;
        }

        /* ã‚¨ãƒ³ã¹ãƒ‡ã‚£ãƒ³ã‚°é¸æŠ */
        .embedding-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .embedding-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .embedding-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .embedding-card.selected {
            border-color: #764ba2;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        }

        .embedding-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .embedding-desc {
            font-size: 0.9em;
            color: #666;
        }

        /* ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é¸æŠ */
        .module-selector {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .selector-title {
            font-weight: bold;
            color: #555;
            margin-bottom: 10px;
        }

        .option-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }

        .option-button {
            padding: 12px 20px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .option-button:hover {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
            transform: translateY(-2px);
        }

        .option-button.selected {
            border-color: #764ba2;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: bold;
        }

        /* ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¨ãƒªã‚¢ */
        .code-output {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            font-family: 'Consolas', 'Monaco', monospace;
            overflow-x: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .code-header {
            color: #569cd6;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .copy-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .copy-button:hover {
            background: #45a049;
        }

        .code-line {
            margin: 5px 0;
            line-height: 1.6;
        }

        .code-keyword {
            color: #569cd6;
        }

        .code-string {
            color: #ce9178;
        }

        .code-number {
            color: #b5cea8;
        }

        .code-comment {
            color: #6a9955;
            font-style: italic;
        }

        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Jupyter Notebook ã‚¹ã‚¿ã‚¤ãƒ« */
        .notebook-cell {
            background: white;
            border-left: 4px solid #4CAF50;
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .cell-number {
            color: #888;
            font-family: monospace;
            margin-bottom: 10px;
        }

        .run-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 15px;
            transition: background 0.3s ease;
        }

        .run-button:hover {
            background: #45a049;
        }

        .output-area {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Quantum Battle System Designer</h1>
            <p>å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨­è¨ˆãƒ»é¸æŠã—ã¦ã€ã‚ãªãŸã ã‘ã®AIæˆ¦ç•¥ã‚’æ§‹ç¯‰ã—ã‚ˆã†</p>
        </div>

        <div class="module-grid">
            <!-- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«1: åˆæœŸé…ç½® -->
            <div class="module-card">
                <div class="module-title">
                    <span class="module-icon">â™Ÿï¸</span>
                    ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«1: åˆæœŸé…ç½®æˆ¦ç•¥
                </div>
                
                <div class="notebook-cell">
                    <div class="cell-number">In [1]:</div>
                    <p>é§’ã®åˆæœŸé…ç½®ã‚’è¨­å®šã—ã¾ã™ã€‚ã‚¯ãƒªãƒƒã‚¯ã—ã¦é…ç½®ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚</p>
                    
                    <div class="placement-board" id="placementBoard">
                        <!-- ãƒœãƒ¼ãƒ‰ã¯ JavaScript ã§ç”Ÿæˆ -->
                    </div>
                    
                    <div class="module-selector">
                        <div class="selector-title">é…ç½®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼š</div>
                        <div class="option-grid">
                            <div class="option-button selected" onclick="selectPlacement('standard')">
                                ğŸ¯ æ¨™æº–é…ç½®
                            </div>
                            <div class="option-button" onclick="selectPlacement('custom')">
                                âœï¸ ã‚«ã‚¹ã‚¿ãƒ 
                            </div>
                        </div>
                    </div>
                    
                    <button class="run-button" onclick="runPlacement()">â–¶ é…ç½®ã‚’å®Ÿè¡Œ</button>
                    <div class="output-area" id="placementOutput" style="display: none;"></div>
                </div>
            </div>

            <!-- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«2: æ•µé§’æ¨å®š -->
            <div class="module-card">
                <div class="module-title">
                    <span class="module-icon">ğŸ”¬</span>
                    ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«2: æ•µé§’æ¨å®šï¼ˆCQCNNï¼‰
                </div>
                
                <div class="notebook-cell">
                    <div class="cell-number">In [2]:</div>
                    <div class="quantum-config">
                        <div class="config-item">
                            <label class="config-label">ğŸ”¢ é‡å­ãƒ“ãƒƒãƒˆæ•°ï¼ˆn_qubitsï¼‰:</label>
                            <div class="slider-container">
                                <input type="range" id="qubitsSlider" min="4" max="12" value="8" 
                                       oninput="updateValue('qubits', this.value)">
                                <div class="value-display" id="qubitsValue">8</div>
                            </div>
                        </div>
                        
                        <div class="config-item">
                            <label class="config-label">ğŸ“š ãƒ¬ã‚¤ãƒ¤ãƒ¼æ•°ï¼ˆn_layersï¼‰:</label>
                            <div class="slider-container">
                                <input type="range" id="layersSlider" min="1" max="6" value="3" 
                                       oninput="updateValue('layers', this.value)">
                                <div class="value-display" id="layersValue">3</div>
                            </div>
                        </div>
                        
                        <div class="config-item">
                            <label class="config-label">ğŸ¨ ã‚¨ãƒ³ã¹ãƒ‡ã‚£ãƒ³ã‚°ç¨®é¡:</label>
                            <div class="embedding-options">
                                <div class="embedding-card selected" onclick="selectEmbedding('angle')">
                                    <div class="embedding-title">ğŸ“ Angle Embedding</div>
                                    <div class="embedding-desc">å›è»¢ã‚²ãƒ¼ãƒˆãƒ™ãƒ¼ã‚¹ã®å¤å…¸ãƒ‡ãƒ¼ã‚¿åŸ‹ã‚è¾¼ã¿</div>
                                </div>
                                <div class="embedding-card" onclick="selectEmbedding('amplitude')">
                                    <div class="embedding-title">ğŸ“Š Amplitude Embedding</div>
                                    <div class="embedding-desc">æŒ¯å¹…ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆåŠ¹ç‡çš„ï¼‰</div>
                                </div>
                                <div class="embedding-card" onclick="selectEmbedding('iqp')">
                                    <div class="embedding-title">ğŸŒ€ IQP Embedding</div>
                                    <div class="embedding-desc">ç¬é–“é‡å­å¤šé …å¼å›è·¯</div>
                                </div>
                                <div class="embedding-card" onclick="selectEmbedding('basis')">
                                    <div class="embedding-title">ğŸ”· Basis Embedding</div>
                                    <div class="embedding-desc">åŸºåº•çŠ¶æ…‹ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="config-item">
                            <label class="config-label">ğŸ”— ã‚¨ãƒ³ã‚¿ãƒ³ã‚°ãƒ«ãƒ¡ãƒ³ãƒˆæ§‹é€ :</label>
                            <div class="option-grid">
                                <div class="option-button selected" onclick="selectEntanglement('linear')">
                                    Linear
                                </div>
                                <div class="option-button" onclick="selectEntanglement('circular')">
                                    Circular
                                </div>
                                <div class="option-button" onclick="selectEntanglement('full')">
                                    Full
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="run-button" onclick="runQuantumConfig()">â–¶ é‡å­å›è·¯ã‚’æ§‹ç¯‰</button>
                    <div class="output-area" id="quantumOutput" style="display: none;"></div>
                </div>
            </div>

            <!-- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«3: å ±é…¬é–¢æ•° -->
            <div class="module-card">
                <div class="module-title">
                    <span class="module-icon">ğŸ’°</span>
                    ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«3: å ±é…¬é–¢æ•°
                </div>
                
                <div class="notebook-cell">
                    <div class="cell-number">In [3]:</div>
                    <div class="module-selector">
                        <div class="selector-title">å ±é…¬æˆ¦ç•¥ã‚’é¸æŠï¼š</div>
                        <div class="option-grid">
                            <div class="option-button selected" onclick="selectReward('balanced')">
                                âš–ï¸ ãƒãƒ©ãƒ³ã‚¹å‹
                            </div>
                            <div class="option-button" onclick="selectReward('aggressive')">
                                ğŸ—¡ï¸ æ”»æ’ƒé‡è¦–
                            </div>
                            <div class="option-button" onclick="selectReward('defensive')">
                                ğŸ›¡ï¸ é˜²å¾¡é‡è¦–
                            </div>
                            <div class="option-button" onclick="selectReward('escape')">
                                ğŸƒ è„±å‡ºé‡è¦–
                            </div>
                        </div>
                    </div>
                    
                    <button class="run-button" onclick="runReward()">â–¶ å ±é…¬é–¢æ•°ã‚’è¨­å®š</button>
                    <div class="output-area" id="rewardOutput" style="display: none;"></div>
                </div>
            </div>

            <!-- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«4: Qå€¤ãƒãƒƒãƒ— -->
            <div class="module-card">
                <div class="module-title">
                    <span class="module-icon">ğŸ—ºï¸</span>
                    ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«4: Qå€¤ãƒãƒƒãƒ—
                </div>
                
                <div class="notebook-cell">
                    <div class="cell-number">In [4]:</div>
                    <div class="module-selector">
                        <div class="selector-title">Qå€¤è¨ˆç®—æ–¹æ³•ï¼š</div>
                        <div class="option-grid">
                            <div class="option-button selected" onclick="selectQMap('dqn')">
                                ğŸ§  DQN
                            </div>
                            <div class="option-button" onclick="selectQMap('sarsa')">
                                ğŸ“ˆ SARSA
                            </div>
                            <div class="option-button" onclick="selectQMap('montecarlo')">
                                ğŸ² ãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­
                            </div>
                            <div class="option-button" onclick="selectQMap('tabular')">
                                ğŸ“Š ãƒ†ãƒ¼ãƒ–ãƒ«å‹
                            </div>
                        </div>
                    </div>
                    
                    <button class="run-button" onclick="runQMap()">â–¶ Qå€¤ãƒãƒƒãƒ—ã‚’ç”Ÿæˆ</button>
                    <div class="output-area" id="qmapOutput" style="display: none;"></div>
                </div>
            </div>

            <!-- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«5: è¡Œå‹•é¸æŠ -->
            <div class="module-card">
                <div class="module-title">
                    <span class="module-icon">ğŸ¯</span>
                    ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«5: è¡Œå‹•é¸æŠ
                </div>
                
                <div class="notebook-cell">
                    <div class="cell-number">In [5]:</div>
                    <div class="module-selector">
                        <div class="selector-title">è¡Œå‹•é¸æŠæˆ¦ç•¥ï¼š</div>
                        <div class="option-grid">
                            <div class="option-button selected" onclick="selectAction('epsilon')">
                                ğŸ° Îµ-greedy
                            </div>
                            <div class="option-button" onclick="selectAction('boltzmann')">
                                ğŸŒ¡ï¸ ãƒœãƒ«ãƒ„ãƒãƒ³
                            </div>
                            <div class="option-button" onclick="selectAction('ucb')">
                                ğŸ“Š UCB
                            </div>
                            <div class="option-button" onclick="selectAction('thompson')">
                                ğŸ² ãƒˆãƒ³ãƒ—ã‚½ãƒ³
                            </div>
                        </div>
                    </div>
                    
                    <button class="run-button" onclick="runAction()">â–¶ è¡Œå‹•é¸æŠã‚’å®Ÿè¡Œ</button>
                    <div class="output-area" id="actionOutput" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- çµ±åˆã‚³ãƒ¼ãƒ‰ç”Ÿæˆ -->
        <div class="code-output">
            <div class="code-header">
                <span>ğŸ“ ç”Ÿæˆã•ã‚ŒãŸPythonã‚³ãƒ¼ãƒ‰ï¼ˆJupyter Notebookç”¨ï¼‰</span>
                <button class="copy-button" onclick="copyCode()">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
            </div>
            <pre id="generatedCode"></pre>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentConfig = {
            placement: 'standard',
            qubits: 8,
            layers: 3,
            embedding: 'angle',
            entanglement: 'linear',
            reward: 'balanced',
            qmap: 'dqn',
            action: 'epsilon',
            board: Array(6).fill().map(() => Array(6).fill(0))
        };

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeBoard();
            updateCode();
        });

        // ãƒœãƒ¼ãƒ‰åˆæœŸåŒ–
        function initializeBoard() {
            const board = document.getElementById('placementBoard');
            board.innerHTML = '';
            
            // æ¨™æº–é…ç½®
            const standardPlacement = {
                // Player A (rows 0-1)
                '0,1': 'A-good', '0,2': 'A-good', '0,3': 'A-bad', '0,4': 'A-bad',
                '1,1': 'A-good', '1,2': 'A-bad', '1,3': 'A-good', '1,4': 'A-bad',
                // Player B (rows 4-5)
                '4,1': 'B-bad', '4,2': 'B-good', '4,3': 'B-bad', '4,4': 'B-good',
                '5,1': 'B-bad', '5,2': 'B-bad', '5,3': 'B-good', '5,4': 'B-good'
            };
            
            for (let row = 0; row < 6; row++) {
                for (let col = 0; col < 6; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'board-cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    
                    const key = `${row},${col}`;
                    if (standardPlacement[key]) {
                        const [player, type] = standardPlacement[key].split('-');
                        cell.classList.add(`player-${player.toLowerCase()}`, type);
                        cell.textContent = type === 'good' ? 'ğŸ‘‘' : 'â™Ÿï¸';
                        currentConfig.board[row][col] = player === 'A' ? 
                            (type === 'good' ? 1 : -1) : 
                            (type === 'good' ? 2 : -2);
                    }
                    
                    cell.onclick = () => togglePiece(row, col);
                    board.appendChild(cell);
                }
            }
        }

        // é§’ã®åˆ‡ã‚Šæ›¿ãˆ
        function togglePiece(row, col) {
            if (currentConfig.placement !== 'custom') {
                currentConfig.placement = 'custom';
                document.querySelectorAll('.module-selector .option-button').forEach(btn => {
                    btn.classList.remove('selected');
                    if (btn.textContent.includes('ã‚«ã‚¹ã‚¿ãƒ ')) {
                        btn.classList.add('selected');
                    }
                });
            }
            
            const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            const current = currentConfig.board[row][col];
            
            // ã‚µã‚¤ã‚¯ãƒ«: 0 -> A-good -> A-bad -> B-good -> B-bad -> 0
            const cycle = [0, 1, -1, 2, -2];
            const nextIndex = (cycle.indexOf(current) + 1) % cycle.length;
            const next = cycle[nextIndex];
            
            currentConfig.board[row][col] = next;
            
            // UIã‚’æ›´æ–°
            cell.className = 'board-cell';
            cell.textContent = '';
            
            if (next !== 0) {
                const player = Math.abs(next) === 1 ? 'a' : 'b';
                const type = next > 0 ? 'good' : 'bad';
                cell.classList.add(`player-${player}`, type);
                cell.textContent = type === 'good' ? 'ğŸ‘‘' : 'â™Ÿï¸';
            }
            
            updateCode();
        }

        // é…ç½®é¸æŠ
        function selectPlacement(type) {
            currentConfig.placement = type;
            document.querySelectorAll('.module-selector .option-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            if (type !== 'custom') {
                // ãƒ—ãƒªã‚»ãƒƒãƒˆé…ç½®ã‚’é©ç”¨
                initializeBoard();
            }
            updateCode();
        }

        // å€¤ã®æ›´æ–°
        function updateValue(type, value) {
            currentConfig[type] = parseInt(value);
            document.getElementById(`${type}Value`).textContent = value;
            updateCode();
        }

        // ã‚¨ãƒ³ã¹ãƒ‡ã‚£ãƒ³ã‚°é¸æŠ
        function selectEmbedding(type) {
            currentConfig.embedding = type;
            document.querySelectorAll('.embedding-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.embedding-card').classList.add('selected');
            updateCode();
        }

        // ã‚¨ãƒ³ã‚¿ãƒ³ã‚°ãƒ«ãƒ¡ãƒ³ãƒˆé¸æŠ
        function selectEntanglement(type) {
            currentConfig.entanglement = type;
            document.querySelectorAll('.config-item .option-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            updateCode();
        }

        // å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é¸æŠ
        function selectReward(type) {
            currentConfig.reward = type;
            updateSelection(event.target);
            updateCode();
        }

        function selectQMap(type) {
            currentConfig.qmap = type;
            updateSelection(event.target);
            updateCode();
        }

        function selectAction(type) {
            currentConfig.action = type;
            updateSelection(event.target);
            updateCode();
        }

        function updateSelection(target) {
            target.parentElement.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            target.classList.add('selected');
        }

        // å®Ÿè¡Œãƒœã‚¿ãƒ³
        function runPlacement() {
            const output = document.getElementById('placementOutput');
            output.style.display = 'block';
            output.textContent = `âœ… åˆæœŸé…ç½®è¨­å®šå®Œäº†\né…ç½®ã‚¿ã‚¤ãƒ—: ${currentConfig.placement}\nå–„ç‰ã®ä½ç½®: ${countPieces('good')}å€‹\næ‚ªç‰ã®ä½ç½®: ${countPieces('bad')}å€‹`;
        }

        function runQuantumConfig() {
            const output = document.getElementById('quantumOutput');
            output.style.display = 'block';
            output.textContent = `âœ… é‡å­å›è·¯æ§‹ç¯‰å®Œäº†\né‡å­ãƒ“ãƒƒãƒˆæ•°: ${currentConfig.qubits}\nãƒ¬ã‚¤ãƒ¤ãƒ¼æ•°: ${currentConfig.layers}\nã‚¨ãƒ³ã¹ãƒ‡ã‚£ãƒ³ã‚°: ${currentConfig.embedding}\nã‚¨ãƒ³ã‚¿ãƒ³ã‚°ãƒ«ãƒ¡ãƒ³ãƒˆ: ${currentConfig.entanglement}\nç·ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ•°: ${currentConfig.qubits * currentConfig.layers * 3}`;
        }

        function runReward() {
            const output = document.getElementById('rewardOutput');
            output.style.display = 'block';
            const rewards = {
                balanced: 'æ•ç²: +10, è„±å‡º: +50, è¢«æ•ç²: -10',
                aggressive: 'æ•ç²: +20, è„±å‡º: +30, è¢«æ•ç²: -5',
                defensive: 'æ•ç²: +5, è„±å‡º: +40, è¢«æ•ç²: -20',
                escape: 'æ•ç²: +5, è„±å‡º: +100, è¢«æ•ç²: -10'
            };
            output.textContent = `âœ… å ±é…¬é–¢æ•°è¨­å®šå®Œäº†\næˆ¦ç•¥: ${currentConfig.reward}\n${rewards[currentConfig.reward]}`;
        }

        function runQMap() {
            const output = document.getElementById('qmapOutput');
            output.style.display = 'block';
            output.textContent = `âœ… Qå€¤ãƒãƒƒãƒ—ç”Ÿæˆå®Œäº†\næ–¹æ³•: ${currentConfig.qmap}\nçŠ¶æ…‹ç©ºé–“: 6x6x4 = 144æ¬¡å…ƒ\nè¡Œå‹•ç©ºé–“: 4æ–¹å‘`;
        }

        function runAction() {
            const output = document.getElementById('actionOutput');
            output.style.display = 'block';
            const strategies = {
                epsilon: 'Îµ=0.1ã§10%ã®ç¢ºç‡ã§ãƒ©ãƒ³ãƒ€ãƒ æ¢ç´¢',
                boltzmann: 'æ¸©åº¦Ï„=1.0ã§ã‚½ãƒ•ãƒˆãƒãƒƒã‚¯ã‚¹é¸æŠ',
                ucb: 'ä¿¡é ¼åŒºé–“ã«ã‚ˆã‚‹æ¥½è¦³çš„æ¢ç´¢',
                thompson: 'ãƒ™ã‚¤ã‚ºçš„ç¢ºç‡åˆ†å¸ƒã‹ã‚‰ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°'
            };
            output.textContent = `âœ… è¡Œå‹•é¸æŠæˆ¦ç•¥è¨­å®šå®Œäº†\næˆ¦ç•¥: ${currentConfig.action}\n${strategies[currentConfig.action]}`;
        }

        // ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
        function countPieces(type) {
            let count = 0;
            for (let row of currentConfig.board) {
                for (let val of row) {
                    if (type === 'good' && (val === 1 || val === 2)) count++;
                    if (type === 'bad' && (val === -1 || val === -2)) count++;
                }
            }
            return count;
        }

        // ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
        function updateCode() {
            const code = `<span class="code-comment"># === Quantum Battle System Configuration ===</span>
<span class="code-comment"># Generated by Interactive Designer</span>

<span class="code-keyword">import</span> numpy <span class="code-keyword">as</span> np
<span class="code-keyword">import</span> torch
<span class="code-keyword">import</span> torch.nn <span class="code-keyword">as</span> nn
<span class="code-keyword">from</span> real_learning_battle_system <span class="code-keyword">import</span> RealLearningBattleSystem

<span class="code-comment"># === ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«1: åˆæœŸé…ç½® ===</span>
placement_config = {
    <span class="code-string">'type'</span>: <span class="code-string">'${currentConfig.placement}'</span>,
    <span class="code-string">'board'</span>: np.array([
${currentConfig.board.map(row => '        ' + JSON.stringify(row)).join(',\n')}
    ])
}

<span class="code-comment"># === ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«2: æ•µé§’æ¨å®šï¼ˆCQCNNï¼‰ ===</span>
quantum_config = {
    <span class="code-string">'n_qubits'</span>: <span class="code-number">${currentConfig.qubits}</span>,
    <span class="code-string">'n_layers'</span>: <span class="code-number">${currentConfig.layers}</span>,
    <span class="code-string">'embedding_type'</span>: <span class="code-string">'${currentConfig.embedding}'</span>,
    <span class="code-string">'entanglement'</span>: <span class="code-string">'${currentConfig.entanglement}'</span>,
    <span class="code-string">'total_params'</span>: <span class="code-number">${currentConfig.qubits * currentConfig.layers * 3}</span>
}

<span class="code-comment"># === ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«3: å ±é…¬é–¢æ•° ===</span>
reward_config = {
    <span class="code-string">'strategy'</span>: <span class="code-string">'${currentConfig.reward}'</span>,
    <span class="code-string">'capture_reward'</span>: <span class="code-number">${currentConfig.reward === 'aggressive' ? 20 : currentConfig.reward === 'defensive' ? 5 : 10}</span>,
    <span class="code-string">'escape_reward'</span>: <span class="code-number">${currentConfig.reward === 'escape' ? 100 : currentConfig.reward === 'defensive' ? 40 : currentConfig.reward === 'aggressive' ? 30 : 50}</span>,
    <span class="code-string">'captured_penalty'</span>: <span class="code-number">${currentConfig.reward === 'defensive' ? -20 : currentConfig.reward === 'aggressive' ? -5 : -10}</span>
}

<span class="code-comment"># === ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«4: Qå€¤ãƒãƒƒãƒ— ===</span>
qmap_config = {
    <span class="code-string">'method'</span>: <span class="code-string">'${currentConfig.qmap}'</span>,
    <span class="code-string">'state_dim'</span>: <span class="code-number">144</span>,  <span class="code-comment"># 6x6x4</span>
    <span class="code-string">'action_dim'</span>: <span class="code-number">4</span>     <span class="code-comment"># 4æ–¹å‘</span>
}

<span class="code-comment"># === ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«5: è¡Œå‹•é¸æŠ ===</span>
action_config = {
    <span class="code-string">'strategy'</span>: <span class="code-string">'${currentConfig.action}'</span>,
    <span class="code-string">'epsilon'</span>: <span class="code-number">0.1</span> <span class="code-keyword">if</span> <span class="code-string">'${currentConfig.action}'</span> == <span class="code-string">'epsilon'</span> <span class="code-keyword">else</span> <span class="code-keyword">None</span>,
    <span class="code-string">'temperature'</span>: <span class="code-number">1.0</span> <span class="code-keyword">if</span> <span class="code-string">'${currentConfig.action}'</span> == <span class="code-string">'boltzmann'</span> <span class="code-keyword">else</span> <span class="code-keyword">None</span>
}

<span class="code-comment"># === ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ã¨å®Ÿè¡Œ ===</span>
<span class="code-keyword">def</span> <span class="code-keyword">create_custom_ai</span>():
    system = RealLearningBattleSystem()
    
    <span class="code-comment"># ã‚«ã‚¹ã‚¿ãƒ è¨­å®šã‚’é©ç”¨</span>
    ai_config = {
        <span class="code-string">'placement'</span>: placement_config,
        <span class="code-string">'quantum'</span>: quantum_config,
        <span class="code-string">'reward'</span>: reward_config,
        <span class="code-string">'qmap'</span>: qmap_config,
        <span class="code-string">'action'</span>: action_config
    }
    
    <span class="code-comment"># AIã‚’ä½œæˆ</span>
    custom_ai = system.create_ai_with_config(ai_config)
    <span class="code-keyword">return</span> custom_ai

<span class="code-comment"># å®Ÿè¡Œ</span>
<span class="code-keyword">if</span> __name__ == <span class="code-string">"__main__"</span>:
    ai = create_custom_ai()
    print(<span class="code-string">"âœ… ã‚«ã‚¹ã‚¿ãƒ AIä½œæˆå®Œäº†"</span>)
    print(<span class="code-string">f"è¨­å®š: {ai.get_config()}"</span>)
`;
            
            document.getElementById('generatedCode').innerHTML = code;
        }

        // ã‚³ãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼
        function copyCode() {
            const codeElement = document.getElementById('generatedCode');
            const textArea = document.createElement('textarea');
            textArea.value = codeElement.textContent;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'âœ… ã‚³ãƒ”ãƒ¼å®Œäº†ï¼';
            setTimeout(() => {
                button.textContent = originalText;
            }, 2000);
        }
    </script>
</body>
</html>